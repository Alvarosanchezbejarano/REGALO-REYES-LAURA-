<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Contadores especiales</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&family=Mountains+of+Christmas&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    background: #000;
    color: white;
    font-family: 'Playfair Display', serif;
}

section {
    position: relative;
    min-height: 100vh;
    overflow: hidden;
    text-align: center;
    padding: 60px 20px;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: background-image 1.5s ease-in-out;
}

h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 3em;
    margin-bottom: 20px;
}

.contador {
    font-size: 1.6em;
    margin-bottom: 20px;
}

/* SECCIONES */
.romantica {
    background-image: url("/REGALO-REYES-LAURA-/imagenes/zona1/1.jpg");
}
.romantica2 {
    background-image: url("/REGALO-REYES-LAURA-/imagenes/zona2/1.jpg");
}
.navidad {
    background-image: url("/REGALO-REYES-LAURA-/imagenes/navidad/fondo.jpg");
}
.navidad h1 {
    font-family: 'Mountains of Christmas', cursive;
    color: gold;
}
.custom {
    background: linear-gradient(135deg, #2b2b3d, #3a3a5c);
}

/* FLOTANTES */
.flotante {
    position: absolute;
    animation: flotar linear infinite;
    opacity: 0.8;
    pointer-events: none;
}

@keyframes flotar {
    from { transform: translateY(110vh) rotate(0deg); }
    to { transform: translateY(-120vh) rotate(360deg); }
}

/* FORMULARIO */
form {
    max-width: 400px;
    margin: 0 auto 30px;
}
input, button {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 10px;
    border: none;
}
button {
    cursor: pointer;
}

/* M√ìVIL */
@media (max-width: 768px) {
    h1 { font-size: 2.2em; }
    .contador { font-size: 1.3em; }
    section { padding: 40px 15px; }
}
</style>
</head>

<body>

<!-- ZONA 1 -->
<section class="romantica">
    <h1>ü§ç ¬øsab√≠as el tiempo exacto que llevamos juntos? ü§ç</h1>
    <div id="contador1" class="contador"></div>
</section>

<!-- ZONA 2 -->
<section class="romantica2">
    <h1>El tiempo desde que te cre√≠ste que soy del Athletic</h1>
    <div id="contador2" class="contador"></div>
</section>

<!-- NAVIDAD -->
<section class="navidad">
    <h1>üéÑ Tiempo que falta para Navidad üéÑ</h1>
    <div id="contadorNavidad" class="contador"></div>
</section>

<!-- CONTADORES PERSONALIZADOS -->
<section class="custom">
    <h1>‚ûï Contadores personalizados</h1>

    <form id="formCustom">
        <input type="text" id="tituloCustom" placeholder="Texto del contador" required>
        <input type="datetime-local" id="fechaCustom" required>
        <input type="file" id="fotoCustom" accept="image/*">
        <button type="submit">A√±adir contador</button>
    </form>

    <div id="custom"></div>
</section>

<script>
/* FECHAS BASE */
const fecha1 = new Date(2025, 8, 30, 14, 35);
const fecha2 = new Date(2025, 7, 14, 19, 0);

/* CONTADOR */
function contarDesde(fecha, id) {
    const ahora = new Date();
    let s = Math.floor((ahora - fecha) / 1000);
    if (s < 0) return;

    const d = Math.floor(s / 86400); s %= 86400;
    const h = Math.floor(s / 3600);  s %= 3600;
    const m = Math.floor(s / 60);    s %= 60;

    document.getElementById(id).textContent =
        `${d} d√≠as, ${h} horas, ${m} minutos y ${s} segundos`;
}

/* NAVIDAD */
function actualizarNavidad() {
    const ahora = new Date();
    let navidad = new Date(ahora.getFullYear(), 11, 25);
    if (ahora > navidad) navidad.setFullYear(navidad.getFullYear() + 1);

    let s = Math.floor((navidad - ahora) / 1000);

    const d = Math.floor(s / 86400); s %= 86400;
    const h = Math.floor(s / 3600);  s %= 3600;
    const m = Math.floor(s / 60);    s %= 60;

    document.getElementById("contadorNavidad").textContent =
        `${d} d√≠as, ${h} horas, ${m} minutos y ${s} segundos`;
}

/* ROTAR FONDOS */
function rotarFondos(seccion, carpeta, total) {
    let i = 1;
    setInterval(() => {
        seccion.style.backgroundImage =
            `url('/REGALO-REYES-LAURA-/imagenes/${carpeta}/${i}.jpg')`;
        i = i % total + 1;
    }, 3000);
}

/* FLOTANTES */
function crearFlotantes(seccion, emojis, cantidad) {
    for (let i = 0; i < cantidad; i++) {
        const e = document.createElement("div");
        e.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        e.className = "flotante";
        e.style.left = Math.random() * 100 + "%";
        e.style.fontSize = 20 + Math.random() * 30 + "px";
        e.style.animationDuration = 10 + Math.random() * 20 + "s";
        seccion.appendChild(e);
    }
}

/* CUSTOM PERSISTENTE */
let contadoresCustom = JSON.parse(localStorage.getItem("contadoresCustom")) || [];

function guardarCustom() {
    localStorage.setItem("contadoresCustom", JSON.stringify(contadoresCustom));
}

function pintarCustom() {
    const zona = document.getElementById("custom");
    zona.innerHTML = "";

    contadoresCustom.forEach(c => {
        const div = document.createElement("div");
        div.innerHTML = `
            <h2>${c.titulo}</h2>
            <div class="contador" id="custom_${c.id}"></div>
            ${c.imagen ? `<img src="${c.imagen}" width="200" style="border-radius:15px">` : ""}
            <br>
            <button onclick="borrarCustom(${c.id})">‚ùå Borrar</button>
        `;
        zona.appendChild(div);
    });
}

function borrarCustom(id) {
    contadoresCustom = contadoresCustom.filter(c => c.id !== id);
    guardarCustom();
    pintarCustom();
}

document.getElementById("formCustom").addEventListener("submit", e => {
    e.preventDefault();
    const id = Date.now();

    if (fotoCustom.files[0]) {
        const reader = new FileReader();
        reader.onload = () => {
            contadoresCustom.push({
                id,
                titulo: tituloCustom.value,
                fecha: new Date(fechaCustom.value).getTime(),
                imagen: reader.result
            });
            guardarCustom();
            pintarCustom();
        };
        reader.readAsDataURL(fotoCustom.files[0]);
    } else {
        contadoresCustom.push({
            id,
            titulo: tituloCustom.value,
            fecha: new Date(fechaCustom.value).getTime(),
            imagen: null
        });
        guardarCustom();
        pintarCustom();
    }
    e.target.reset();
});

/* LOOP */
setInterval(() => {
    contarDesde(fecha1, "contador1");
    contarDesde(fecha2, "contador2");
    actualizarNavidad();
    contadoresCustom.forEach(c =>
        contarDesde(new Date(c.fecha), `custom_${c.id}`)
    );
}, 1000);

/* INICIO */
rotarFondos(document.querySelector(".romantica"), "zona1", 6);
rotarFondos(document.querySelector(".romantica2"), "zona2", 6);

crearFlotantes(document.querySelector(".romantica"), ["ü§ç","üíã"], 25);
crearFlotantes(document.querySelector(".romantica2"), ["ü§ç","üòΩ"], 25);
crearFlotantes(document.querySelector(".navidad"), ["üéÑ","‚ùÑÔ∏è","üéÅ"], 30);

pintarCustom();
</script>

</body>
</html>
